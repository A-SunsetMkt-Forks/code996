var $=Object.defineProperty,M=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var D=(t,e,u)=>e in t?$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[e]=u,N=(t,e)=>{for(var u in e||(e={}))W.call(e,u)&&D(t,u,e[u]);if(v)for(var u of v(e))H.call(e,u)&&D(t,u,e[u]);return t},w=(t,e)=>M(t,P(e));import{r as L}from"./index.a7dd6811.js";import{_ as q}from"./CommonFooter.203e4f14.js";const T=Vue.defineComponent({props:{data:{type:Array,default:()=>[]}},setup(t){const e=t,u=Vue.ref(null);function c(){new chartXkcd.Bar(u.value,{data:{labels:e.data.map(n=>n.time),datasets:[{data:e.data.map(n=>n.count)}]},options:{backgroundColor:"#212121",strokeColor:"#fff",unxkcdify:!1}})}return Vue.onMounted(()=>{Vue.nextTick(()=>{c()})}),(n,o)=>(Vue.openBlock(),Vue.createElementBlock("svg",{class:"bar-chart",ref_key:"bar",ref:u},null,512))}}),A=Vue.defineComponent({props:{data:{type:Array,default:()=>[]}},setup(t){const e=t,u=Vue.ref(null);function c(){new chartXkcd.Pie(u.value,{data:{labels:e.data.map(n=>n.time),datasets:[{data:e.data.map(n=>n.count)}]},options:{backgroundColor:"#212121",strokeColor:"#fff"}})}return Vue.onMounted(()=>{Vue.nextTick(()=>{c()})}),(n,o)=>(Vue.openBlock(),Vue.createElementBlock("svg",{class:"bar-chart",ref_key:"bar",ref:u},null,512))}});function g(t){const{openingTime:e,closingTime:u}=I(t),{workHourPl:c}=U(t,e);return{openingTime:e,closingTime:u,workHourPl:c}}function I(t){const e=t.reduce((a,s)=>a+s.count**2,0)/t.length,u=Math.sqrt(e),n=t.map((a,s)=>{var l,m;const V=a.count/u;return w(N({},a),{score:V,prevScore:(a.count-(((l=t[s-1])==null?void 0:l.count)||a.count))/u,nextScore:((((m=t[s+1])==null?void 0:m.count)||a.count)-a.count)/u})}).filter(a=>a.score>=.5),o=n.filter(a=>+a.time>=8&&+a.time<=12),i=n.filter(a=>+a.time>=17&&+a.time<=23),d=o.sort((a,s)=>Number(a.time)-Number(s.time))[0],r=i.sort((a,s)=>Number(s.time)-Number(a.time))[0];return Math.abs(d==null?void 0:d.prevScore),(r==null?void 0:r.score)+(r==null?void 0:r.nextScore)<.25||(r==null?void 0:r.score)+(r==null?void 0:r.nextScore)>.5,{openingTime:d,closingTime:r}}function U(t=[],e){const u=t.filter(l=>+l.time>=+(e==null?void 0:e.time)&&+l.time<=+(e==null?void 0:e.time)+9),c=t.filter(l=>!u.includes(l)),n=u.reduce((l,m)=>l+m.count,0),o=c.reduce((l,m)=>l+m.count,0),i=t.sort((l,m)=>m.count-l.count),d=i.slice(0,9),r=i.slice(9,i.length+1),a=d.reduce((l,m)=>l+m.count,0),s=r.reduce((l,m)=>l+m.count,0);return{workHourPl:[{time:"\u5DE5\u4F5C",count:n,timeCount:d.length},{time:"\u52A0\u73ED",count:o,timeCount:r.length}],workingTimeCount:n,workingElseTimeCount:o,top9TimeCount:a,top9ElseTimeCount:s}}function x(t){return t.reduce((e,u)=>e+u.count,0)}function f(t,e,u=2){return+(t/e*100).toFixed(u)}function F(t=[]){return t[Math.floor(Math.random()*t.length)]}function b(t){const e=t.slice(0,5),u=t[5],c=t[6],n=x(t),o={workday:x(e),saturday:u.count,sunday:c.count},i={workday:f(o.workday,n),saturday:f(o.saturday,n),sunday:f(o.sunday,n)},d=[{time:"\u5DE5\u4F5C\u65E5",count:o.workday},{time:"\u5468\u672B",count:o.saturday+o.sunday}],r=j(i),s=[5,6,6,7,7][r-1];return{totalCount:n,commitCount:o,commitRatio:i,workDayType:r,workDayTypeValue:s,workWeekPl:d}}function j(t){let e=1;return t.workday>=90?e=1:t.workday>=85&&t.workday<90?e=2:t.workday>=79&&t.workday<85?e=3:t.workday>=72&&t.workday<79?e=4:t.workday<72&&(e=5),e}function S(t=""){let e=[];return t.split(",").forEach(u=>{const c=u.split("_");e.push({time:c[1],count:Number(c[0])})}),e}function z(t){return[{name:"\u5468\u4E00",key:"1"},{name:"\u5468\u4E8C",key:"2"},{name:"\u5468\u4E09",key:"3"},{name:"\u5468\u56DB",key:"4"},{name:"\u5468\u4E94",key:"5"},{name:"\u5468\u516D",key:"6"},{name:"\u5468\u65E5",key:"7"}].map(u=>{const c=t.find(n=>n.time===u.key);return{time:u.name,count:(c==null?void 0:c.count)||0}})}function G(){const t=VueRouter.useRouter(),{query:e}=t.currentRoute.value;(!e.time||!e.hour||!e.week)&&t.push({name:"index",query:{error:"url_query_error"}})}function B(){const t=VueRouter.useRouter(),{query:e}=t.currentRoute.value,u=S(e.hour),c=z(S(e.week)),n=e.time.split("_"),o=`${n[0]} \u223C ${n[1]}`,i=u.reduce((d,r)=>d+r.count,0);return{hourData:u,weekData:c,timeRange:n,timeStr:o,totalCount:i}}function X(){const{hourData:t,weekData:e,totalCount:u}=B(),{openingTime:c,closingTime:n,workHourPl:o}=g(t),{workDayTypeValue:i,workWeekPl:d}=b(e),{index996:r,index996Str:a,overTimeRadio:s,isStandard:V}=R({workHourPl:o,workWeekPl:d,hourData:t}),l=O({workHourPl:o,workWeekPl:d,index996:r,overTimeRadio:s}),m=Number(c==null?void 0:c.time),E=Number(n==null?void 0:n.time)%12;return{workingType:`${m||"?"}${E||"?"}${i||"?"}`,workingTypeStr:`\u65E9${m||"?"}\u665A${E||"?"}\u4E00\u5468${i||"?"}\u5929`,openingTime:c,closingTime:n,workDayTypeValue:i,workHourPl:o,workWeekPl:d,totalCount:u,index996:r,index996Str:a,overTimeRadio:s,isStandard:V,MSG_TYPE:l}}function R({workHourPl:t,workWeekPl:e,hourData:u}){const c=t[0].count,n=t[1].count,o=e[0].count,i=e[1].count,d=(n+c*i/(o+i)).toFixed(0),r=c+n;let a=Math.ceil(d/r*100);a===0&&u.length<9&&(a=Y({hourData:u,totalCount:r}));const s=a*3,V=s<200&&r>50;let l="";return s<=10?l=F(["\u4EE4\u4EBA\u7FA1\u6155\u7684\u5DE5\u4F5C","\u606D\u559C\uFF0C\u4F60\u4EEC\u6CA1\u6709\u798F\u62A5","\u4F60\u5C31\u662F\u642C\u7816\u754C\u7684\u6B27\u7687\u5427"]):s>10&&s<=50?l=F(["\u4F60\u8FD8\u6709\u5269\u4F59\u4EF7\u503C"]):s>50&&s<=90?l=F(["\u52A0\u6CB9\uFF0C\u8001\u677F\u7684\u6CD5\u62C9\u5229\u9760\u4F60\u4E86"]):s>90&&s<=110?l=F(["\u4F60\u7684\u798F\u62A5\u5DF2\u7ECF\u4FEE\u6EE1\u4E86"]):s>110&&(l=F(["\u4F60\u4EEC\u60F3\u5FC5\u5C31\u662F\u5377\u738B\u4E2D\u7684\u5377\u738B\u5427"])),{index996:s,index996Str:l,overTimeRadio:a,isStandard:V}}function Y({hourData:t,totalCount:e}){const c=e/t.length*9;return Math.ceil(e/c*100)-100}function O(t){const{workHourPl:e,workWeekPl:u,overTimeRadio:c}=t;let n="";const o=e[0].count+e[1].count,i=u[0].count+u[1].count;return o!==i&&(n="commit_is_fake"),(o<100||i<100)&&(n="commit_is_low"),c>65&&(n="overTimeRadio_is_too_high"),n}function Q(){const{hourData:t,weekData:e}=B(),{openingTime:u,closingTime:c,workHourPl:n}=g(t),{workDayTypeValue:o,workWeekPl:i}=b(e),{index996:d,overTimeRadio:r,isStandard:a}=R({workHourPl:n,workWeekPl:i,hourData:t}),s=Number(u==null?void 0:u.time),V=Number(c==null?void 0:c.time),l=[{label:"\u65E5\u5747\u8003\u52E4\u6253\u5361\u65F6\u957F",key:"attendance",unit:"h"},{label:"\u65E5\u5747\u6709\u6548\u5DE5\u4F5C\u65F6\u95F4",key:"codeTime",unit:"h"},{label:"\u6BCF\u5468\u5B9E\u9645\u5DE5\u65F6",key:"weekTime",unit:"h"},{label:"\u9884\u8BA1\u6BCF\u5468\u52A0\u73ED\u65F6\u957F",key:"overtime",unit:"h"},{label:"\u52A0\u73ED\u65F6\u95F4\u5360\u6BD4",key:"overTimeRadio",unit:"%"},{label:"996\u6307\u6570",key:"index996",unit:""}],m=V-s;let E=0;V<=19?E=V-s-1.5:V>19&&(E=V-s-2.5);const p=E*o,_=p-37.5,C={type:`${s||"?"}${V%12||"?"}${o||"?"}`,attendance:m,codeTime:E,weekTime:p,overtime:_,overTimeRadio:r,index996:d};let k=[{type:"955",attendance:8,codeTime:6.5,weekTime:32.5,overtime:-5,overTimeRadio:-11,index996:-33},{type:"965",attendance:9,codeTime:7.5,weekTime:37.5,overtime:0,overTimeRadio:0,index996:0},{type:"966",attendance:9,codeTime:7.5,weekTime:45,overtime:7.5,overTimeRadio:16,index996:48},{type:"995",attendance:12,codeTime:9.5,weekTime:47.5,overtime:10,overTimeRadio:21,index996:63},{type:"996",attendance:12,codeTime:9.5,weekTime:57,overtime:19.5,overTimeRadio:34,index996:100},{type:"997",attendance:12,codeTime:9.5,weekTime:66.5,overtime:29,overTimeRadio:44,index996:130},{type:"9126",attendance:15,codeTime:12.5,weekTime:75,overtime:37.5,overTimeRadio:50,index996:150}];return a&&(k=[...k,C].sort((y,h)=>y.index996-h.index996)),{tableConfig:l,tableData:k,index996:d,isStandard:a}}const J={class:"table-box"},K={class:"container table"},Z=Vue.createElementVNode("th",{class:"l"},"\u65F6\u95F4\u7C7B\u578B",-1),ee={class:"l"},te=Vue.createElementVNode("p",{class:"tips"},"* \u9AD8\u4EAE\u5217\u4E3A\u8BE5\u9879\u76EE\u7684\u4F30\u7B97\u6307\u6807",-1),ue=Vue.defineComponent({setup(t){const{tableConfig:e,tableData:u,index996:c,isStandard:n}=Q(),o=i=>c===i&&n?"active":"";return(i,d)=>(Vue.openBlock(),Vue.createElementBlock("div",J,[Vue.createElementVNode("table",K,[Vue.createElementVNode("thead",null,[Vue.createElementVNode("tr",null,[Z,(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(u),r=>(Vue.openBlock(),Vue.createElementBlock("th",{class:Vue.normalizeClass(o(r.index996))},Vue.toDisplayString(r.type),3))),256))])]),Vue.createElementVNode("tbody",null,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(e),r=>(Vue.openBlock(),Vue.createElementBlock("tr",null,[Vue.createElementVNode("td",ee,Vue.toDisplayString(r.label),1),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(u),a=>(Vue.openBlock(),Vue.createElementBlock("td",{class:Vue.normalizeClass(o(a.index996))},Vue.toDisplayString(a[r.key])+Vue.toDisplayString(r.unit),3))),256))]))),256))])]),te]))}}),oe={class:"result"},ne=Vue.createElementVNode("h1",null,"#CODE996 Result",-1),ae={class:"main wrapper"},ce={class:"top-result container"},re={key:0},se={class:"result-line"},le={key:0,class:"score-box"},ie={class:"score-number"},de={class:"content"},me={key:0},Ve=Vue.createTextVNode(" \u63A8\u6D4B\u4F60\u4EEC\u7684\u5DE5\u4F5C\u65F6\u95F4\u7C7B\u578B\u4E3A\uFF1A "),Ee={class:"p1"},ke={class:"p2"},Fe={key:1},pe=Vue.createTextVNode(" \u63A8\u6D4B\u4F60\u4EEC\u7684\u52A0\u73ED\u65F6\u95F4\u5360\u6BD4\u4E3A\uFF1A "),_e={class:"p1"},Ce={key:0,class:"p2"},ye={key:2},he={key:0},fe={key:1},Be=Vue.createTextVNode(" \u603B commit \u6570\uFF1A "),ve={class:"p1"},De=Vue.createTextVNode(" \u5206\u6790\u65F6\u95F4\u6BB5\uFF1A "),Ne={class:"p1"},we={key:1,class:"exp"},Te=Vue.createTextVNode(" 996\u6307\u6570\uFF1A\u4E3A0\u5219\u4E0D\u52A0\u73ED\uFF0C\u503C\u8D8A\u5927\u4EE3\u8868\u52A0\u73ED\u8D8A\u4E25\u91CD\uFF0C996\u5DE5\u4F5C\u5236\u5BF9\u5E94\u7684\u503C\u4E3A100\uFF0C\u8D1F\u503C\u8BF4\u660E\u5DE5\u4F5C\u975E\u5E38\u8F7B\u677E\u3002 "),Ae={class:"content container"},ge={class:"section"},xe={class:"item"},be=Vue.createElementVNode("h2",null,"\u6309\u5C0F\u65F6commit\u5206\u5E03",-1),Se={key:0,class:"item"},Re=Vue.createElementVNode("h2",null,"\u52A0\u73ED/\u5DE5\u4F5Ccommit\u5360\u6BD4\uFF08\u6309\u5C0F\u65F6\uFF09",-1),$e={class:"section"},Me={class:"item"},Pe=Vue.createElementVNode("h2",null,"\u6309\u5929commit\u5206\u5E03",-1),We={key:0,class:"item"},He=Vue.createElementVNode("h2",null,"\u52A0\u73ED/\u5DE5\u4F5Ccommit\u5360\u6BD4\uFF08\u6309\u5929\uFF09",-1),Le=Vue.createElementVNode("h2",{id:"compare-table"},"\u5DE5\u4F5C\u65F6\u95F4\u53C2\u7167\u8868\uFF1A",-1),qe=Vue.createElementVNode("div",{class:"container"},[Vue.createElementVNode("h2",{class:"title"},"\u6CE8\u610F\u4E8B\u9879\uFF1A"),Vue.createElementVNode("p",null,"\u5206\u6790\u7ED3\u679C\u4EC5\u4F9B\u53C2\u8003\uFF0C\u4E0D\u4EE3\u8868\u4EFB\u4F55\u5EFA\u8BAE"),Vue.createElementVNode("p",null,"\u539F\u59CB\u5206\u6790\u6570\u636E\u901A\u8FC7 URL \u4F20\u8F93\uFF0C\u8BF7\u614E\u91CD\u5206\u4EAB URL \u7ED9\u7B2C\u4E09\u65B9"),Vue.createElementVNode("p",null,"\u8BF7\u52FF\u7528\u4E8E\u6B63\u5F0F\u573A\u5408")],-1),ze=Vue.defineComponent({setup(t){const e=Vue.ref([]),u=Vue.ref([]),c=Vue.ref([]),n=Vue.ref([]),o=Vue.ref({});function i(){const{hourData:a,weekData:s,timeStr:V,totalCount:l}=B(),{workingType:m,workingTypeStr:E,index996:p,index996Str:_,overTimeRadio:C,isStandard:k,workHourPl:y,workWeekPl:h}=X();e.value=[...a],u.value=[...s],c.value=[...y],n.value=[...h],o.value={workingType:m,workingTypeStr:E,totalCount:l,timeStr:V,index996:p,index996Str:_,overTimeRadio:C,isStandard:k}}const d=()=>{const a=document.getElementById("compare-table");a&&a.scrollIntoView({behavior:"smooth"})},r=()=>{L.push({name:"index"})};return G(),Vue.onMounted(()=>{i()}),(a,s)=>(Vue.openBlock(),Vue.createElementBlock("div",oe,[Vue.createElementVNode("div",{class:"header"},[Vue.createElementVNode("div",{class:"wrapper"},[Vue.createElementVNode("span",{class:"button back",onClick:r},"\u8FD4\u56DE"),ne])]),Vue.createElementVNode("div",ae,[Vue.createElementVNode("div",ce,[o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("h1",re,"\u8BE5\u9879\u76EE\u7684996\u6307\u6570\u662F\uFF1A")):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",se,[o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("div",le,[Vue.createElementVNode("div",ie,Vue.toDisplayString(o.value.index996),1)])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",de,[o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("p",me,[Ve,Vue.createElementVNode("span",Ee,Vue.toDisplayString(o.value.workingType),1),Vue.createElementVNode("span",ke,"("+Vue.toDisplayString(o.value.workingTypeStr)+")",1)])):Vue.createCommentVNode("",!0),o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("p",Fe,[pe,Vue.createElementVNode("span",_e,Vue.toDisplayString(o.value.overTimeRadio)+"%",1),o.value.index996<0?(Vue.openBlock(),Vue.createElementBlock("span",Ce,"(\u5DE5\u4F5C\u4E0D\u9971\u548C)")):Vue.createCommentVNode("",!0)])):Vue.createCommentVNode("",!0),o.value.isStandard?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("p",ye,[o.value.totalCount<=50?(Vue.openBlock(),Vue.createElementBlock("span",he,"\u8BE5\u9879\u76EE\u7684commit\u6570\u91CF\u8FC7\u5C11\uFF0C\u53EA\u663E\u793A\u57FA\u672C\u4FE1\u606F")):(Vue.openBlock(),Vue.createElementBlock("span",fe,"\u8BE5\u9879\u76EE\u4E3A\u5F00\u6E90\u9879\u76EE\uFF0C\u53EA\u663E\u793A\u57FA\u672C\u4FE1\u606F"))])),Vue.createElementVNode("p",null,[Be,Vue.createElementVNode("span",ve,Vue.toDisplayString(o.value.totalCount),1)]),Vue.createElementVNode("p",null,[De,Vue.createElementVNode("span",Ne,Vue.toDisplayString(o.value.timeStr),1)])])]),o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("p",we,[Te,Vue.createElementVNode("a",{onClick:d},"\u5177\u4F53\u53EF\u53C2\u8003\u4E0B\u65B9\u8868\u683C")])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",Ae,[Vue.createElementVNode("div",ge,[Vue.createElementVNode("div",xe,[be,Vue.createVNode(T,{data:e.value},null,8,["data"])]),o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("div",Se,[Re,Vue.createVNode(A,{data:c.value},null,8,["data"])])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",$e,[Vue.createElementVNode("div",Me,[Pe,Vue.createVNode(T,{data:u.value},null,8,["data"])]),o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("div",We,[He,Vue.createVNode(A,{data:n.value},null,8,["data"])])):Vue.createCommentVNode("",!0)])]),Le,Vue.createVNode(ue),qe]),Vue.createVNode(q)]))}});export{ze as default};
